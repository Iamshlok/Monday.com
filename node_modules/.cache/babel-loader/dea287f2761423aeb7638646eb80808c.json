{"ast":null,"code":"import _regeneratorRuntime from\"D:/monday.com/Monday.form/quickstart-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"D:/monday.com/Monday.form/quickstart-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"D:/monday.com/Monday.form/quickstart-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";export function createItem(_x,_x2,_x3){return _createItem.apply(this,arguments);}function _createItem(){_createItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(boardId,groupId,columnData){var filteredColumnData,itemName,columnValues,query,response,responseData,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Filter out columns with null values\nfilteredColumnData=columnData.filter(function(_ref){var value=_ref.value;return value!==null&&value!==''&&value.selectedItemId!==''&&value.selectedItemId!==false;});// Construct the mutation query dynamically\nitemName=filteredColumnData.find(function(column){return column.id==='name';}).value;columnValues=filteredColumnData.map(function(_ref2){var id=_ref2.id,value=_ref2.value,type=_ref2.type;if(type==='board-relation'&&typeof value==='object'&&value!==null){return\"\\\\\\\"\".concat(id,\"\\\\\\\":{\\\\\\\"linkedPulseIds\\\\\\\":[{\\\\\\\"linkedPulseId\\\\\\\":\").concat(value.selectedItemId,\"}]}\");}else if(type==='hour'){var _value$split=value.split(':'),_value$split2=_slicedToArray(_value$split,2),hourStr=_value$split2[0],minuteStr=_value$split2[1];var formattedHour=parseInt(hourStr,10);var formattedMinute=parseInt(minuteStr,10);if(!isNaN(formattedHour)&&!isNaN(formattedMinute)){return\"\\\\\\\"\".concat(id,\"\\\\\\\":{\\\\\\\"hour\\\\\\\":\").concat(formattedHour,\",\\\\\\\"minute\\\\\\\":\").concat(formattedMinute,\"}\");}else{// Handle the case where the conversion fails\nconsole.error(\"Invalid hour type value: \".concat(value));return'';}}else if(type==='boolean'){var booleanValue=value?'true':'false';return\"\\\\\\\"\".concat(id,\"\\\\\\\":{\\\\\\\"checked\\\\\\\":\\\\\\\"\").concat(booleanValue,\"\\\\\\\"}\");}else{return\"\\\\\\\"\".concat(id,\"\\\\\\\": \\\\\\\"\").concat(value,\"\\\\\\\"\");}}).join(', ');query=\"mutation {\\n      create_item (\\n        board_id: \".concat(boardId,\",\\n        group_id: \\\"\").concat(groupId,\"\\\",\\n        item_name: \\\"\").concat(itemName.replace(/\"/g,'\\\\\"'),\"\\\",\\n        column_values: \\\"{\").concat(columnValues,\"}\\\"\\n      ) {\\n        id\\n      }\\n    }\");// Make the API request with the dynamic query\n_context.next=6;return fetch(\"https://api.monday.com/v2\",{method:'post',headers:{'Content-Type':'application/json','Authorization':'eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjI5MTk3MzkwMCwiYWFpIjoxMSwidWlkIjo1MDc0MDc5NiwiaWFkIjoiMjAyMy0xMC0yNlQxMTozOToxNy4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTg2ODA3NDQsInJnbiI6InVzZTEifQ.YqNGkoV6ioF5pgYl_F9t32cOSUxaX_ETL_iPmpEjBOk'// Replace with your API key\n},body:JSON.stringify({'query':query})});case 6:response=_context.sent;if(response.ok){_context.next=13;break;}_context.next=10;return response.json();case 10:responseData=_context.sent;console.log(responseData);throw new Error('Failed to create item');case 13:_context.next=15;return response.json();case 15:data=_context.sent;return _context.abrupt(\"return\",data.data);case 17:case\"end\":return _context.stop();}}},_callee);}));return _createItem.apply(this,arguments);}","map":{"version":3,"names":["createItem","boardId","groupId","columnData","filteredColumnData","filter","value","selectedItemId","itemName","find","column","id","columnValues","map","type","split","hourStr","minuteStr","formattedHour","parseInt","formattedMinute","isNaN","console","error","booleanValue","join","query","replace","fetch","method","headers","body","JSON","stringify","response","ok","json","responseData","log","Error","data"],"sources":["D:/monday.com/Monday.form/quickstart-react/src/mutation.js"],"sourcesContent":["export async function createItem(boardId, groupId, columnData) {\r\n  // Filter out columns with null values\r\n  const filteredColumnData = columnData.filter(({ value }) => value !== null && value !== '' && value.selectedItemId !== '' && value.selectedItemId !== false);\r\n\r\n  // Construct the mutation query dynamically\r\n  const itemName = filteredColumnData.find(column => column.id === 'name').value;\r\n\r\n  const columnValues = filteredColumnData\r\n    .map(({ id, value, type }) => {\r\n      if (type === 'board-relation' && typeof value === 'object' && value !== null) {\r\n        return `\\\\\\\"${id}\\\\\\\":{\\\\\\\"linkedPulseIds\\\\\\\":[{\\\\\\\"linkedPulseId\\\\\\\":${value.selectedItemId}}]}`;\r\n      } else if (type === 'hour') {\r\n        const [hourStr, minuteStr] = value.split(':');\r\n        const formattedHour = parseInt(hourStr, 10);\r\n        const formattedMinute = parseInt(minuteStr, 10);\r\n\r\n        if (!isNaN(formattedHour) && !isNaN(formattedMinute)) {\r\n          return `\\\\\\\"${id}\\\\\\\":{\\\\\\\"hour\\\\\\\":${formattedHour},\\\\\\\"minute\\\\\\\":${formattedMinute}}`;\r\n        } else {\r\n          // Handle the case where the conversion fails\r\n          console.error(`Invalid hour type value: ${value}`);\r\n          return '';\r\n        }\r\n      } else if (type === 'boolean') {\r\n        const booleanValue = value ? 'true' : 'false';\r\n      return `\\\\\\\"${id}\\\\\\\":{\\\\\\\"checked\\\\\\\":\\\\\\\"${booleanValue}\\\\\\\"}`;\r\n      } else {\r\n        return `\\\\\\\"${id}\\\\\\\": \\\\\\\"${value}\\\\\\\"`;\r\n      }\r\n    })\r\n    .join(', ');\r\n\r\n  const query = `mutation {\r\n      create_item (\r\n        board_id: ${boardId},\r\n        group_id: \"${groupId}\",\r\n        item_name: \"${itemName.replace(/\"/g, '\\\\\"')}\",\r\n        column_values: \"{${columnValues}}\"\r\n      ) {\r\n        id\r\n      }\r\n    }`;\r\n\r\n  // Make the API request with the dynamic query\r\n  const response = await fetch(\"https://api.monday.com/v2\", {\r\n    method: 'post',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjI5MTk3MzkwMCwiYWFpIjoxMSwidWlkIjo1MDc0MDc5NiwiaWFkIjoiMjAyMy0xMC0yNlQxMTozOToxNy4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTg2ODA3NDQsInJnbiI6InVzZTEifQ.YqNGkoV6ioF5pgYl_F9t32cOSUxaX_ETL_iPmpEjBOk', // Replace with your API key\r\n    },\r\n    body: JSON.stringify({\r\n      'query': query,\r\n    }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const responseData = await response.json();\r\n    console.log(responseData);\r\n    throw new Error('Failed to create item');\r\n  }\r\n\r\n  const data = await response.json();\r\n  return data.data;\r\n}\r\n"],"mappings":"gZAAA,eAAsBA,WAAtB,uD,6FAAO,iBAA0BC,OAA1B,CAAmCC,OAAnC,CAA4CC,UAA5C,kMACL;AACMC,kBAFD,CAEsBD,UAAU,CAACE,MAAX,CAAkB,kBAAGC,MAAH,MAAGA,KAAH,OAAeA,MAAK,GAAK,IAAV,EAAkBA,KAAK,GAAK,EAA5B,EAAkCA,KAAK,CAACC,cAAN,GAAyB,EAA3D,EAAiED,KAAK,CAACC,cAAN,GAAyB,KAAzG,EAAlB,CAFtB,CAIL;AACMC,QALD,CAKYJ,kBAAkB,CAACK,IAAnB,CAAwB,SAAAC,MAAM,QAAIA,OAAM,CAACC,EAAP,GAAc,MAAlB,EAA9B,EAAwDL,KALpE,CAOCM,YAPD,CAOgBR,kBAAkB,CACpCS,GADkB,CACd,eAAyB,IAAtBF,GAAsB,OAAtBA,EAAsB,CAAlBL,KAAkB,OAAlBA,KAAkB,CAAXQ,IAAW,OAAXA,IAAW,CAC5B,GAAIA,IAAI,GAAK,gBAAT,EAA6B,MAAOR,MAAP,GAAiB,QAA9C,EAA0DA,KAAK,GAAK,IAAxE,CAA8E,CAC5E,oBAAcK,EAAd,iEAAwEL,KAAK,CAACC,cAA9E,QACD,CAFD,IAEO,IAAIO,IAAI,GAAK,MAAb,CAAqB,CAC1B,iBAA6BR,KAAK,CAACS,KAAN,CAAY,GAAZ,CAA7B,8CAAOC,OAAP,kBAAgBC,SAAhB,kBACA,GAAMC,cAAa,CAAGC,QAAQ,CAACH,OAAD,CAAU,EAAV,CAA9B,CACA,GAAMI,gBAAe,CAAGD,QAAQ,CAACF,SAAD,CAAY,EAAZ,CAAhC,CAEA,GAAI,CAACI,KAAK,CAACH,aAAD,CAAN,EAAyB,CAACG,KAAK,CAACD,eAAD,CAAnC,CAAsD,CACpD,oBAAcT,EAAd,+BAAsCO,aAAtC,4BAAsEE,eAAtE,MACD,CAFD,IAEO,CACL;AACAE,OAAO,CAACC,KAAR,oCAA0CjB,KAA1C,GACA,MAAO,EAAP,CACD,CACF,CAZM,IAYA,IAAIQ,IAAI,GAAK,SAAb,CAAwB,CAC7B,GAAMU,aAAY,CAAGlB,KAAK,CAAG,MAAH,CAAY,OAAtC,CACF,oBAAcK,EAAd,sCAA6Ca,YAA7C,UACC,CAHM,IAGA,CACL,oBAAcb,EAAd,sBAA6BL,KAA7B,SACD,CACF,CAtBkB,EAuBlBmB,IAvBkB,CAuBb,IAvBa,CAPhB,CAgCCC,KAhCD,8DAkCazB,OAlCb,mCAmCcC,OAnCd,sCAoCeM,QAAQ,CAACmB,OAAT,CAAiB,IAAjB,CAAuB,KAAvB,CApCf,2CAqCoBf,YArCpB,+CA2CL;AA3CK,sBA4CkBgB,MAAK,CAAC,2BAAD,CAA8B,CACxDC,MAAM,CAAE,MADgD,CAExDC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,gBAAiB,qOAAuO;AAFjP,CAF+C,CAMxDC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnB,QAASP,KADU,CAAf,CANkD,CAA9B,CA5CvB,QA4CCQ,QA5CD,kBAuDAA,QAAQ,CAACC,EAvDT,iDAwDwBD,SAAQ,CAACE,IAAT,EAxDxB,SAwDGC,YAxDH,eAyDHf,OAAO,CAACgB,GAAR,CAAYD,YAAZ,EAzDG,KA0DG,IAAIE,MAAJ,CAAU,uBAAV,CA1DH,gCA6DcL,SAAQ,CAACE,IAAT,EA7Dd,SA6DCI,IA7DD,+CA8DEA,IAAI,CAACA,IA9DP,yD"},"metadata":{},"sourceType":"module"}