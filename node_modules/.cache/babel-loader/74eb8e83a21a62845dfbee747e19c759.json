{"ast":null,"code":"import _regeneratorRuntime from\"D:/monday.com/Monday.form/quickstart-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/monday.com/Monday.form/quickstart-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";export function createItem(_x,_x2,_x3){return _createItem.apply(this,arguments);}function _createItem(){_createItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(boardId,groupId,columnData){var filteredColumnData,itemName,columnValues,query,response,responseData,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Filter out columns with null values\nfilteredColumnData=columnData.filter(function(_ref){var value=_ref.value;return value!==null&&value!=='';});// Construct the mutation query dynamically\nitemName=filteredColumnData.find(function(column){return column.id==='name';}).value;columnValues=filteredColumnData.map(function(_ref2){var id=_ref2.id,value=_ref2.value,type=_ref2.type;if(type==='board-relation'&&typeof value==='object'&&value!==null){return\"\\\\\\\"\".concat(id,\"\\\\\\\":{\\\\\\\"linkedPulseIds\\\\\\\":[{\\\\\\\"linkedPulseId\\\\\\\"\").concat(value.selectedItemId,\"\\\\\\\"}]}\");}else{return\"\\\\\\\"\".concat(id,\"\\\\\\\": \\\\\\\"\").concat(value,\"\\\\\\\"\");}}).join(', ');query=\"mutation {\\n    create_item (\\n      board_id: \".concat(boardId,\",\\n      group_id: \\\"\").concat(groupId,\"\\\",\\n      item_name: \\\"\").concat(itemName.replace(/\"/g,'\\\\\"'),\"\\\",\\n      column_values: \\\"{\").concat(columnValues,\"}\\\"\\n    ) {\\n      id\\n    }\\n  }\");// Make the API request with the dynamic query\n_context.next=6;return fetch(\"https://api.monday.com/v2\",{method:'post',headers:{'Content-Type':'application/json','Authorization':'eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjI5MTk3MzkwMCwiYWFpIjoxMSwidWlkIjo1MDc0MDc5NiwiaWFkIjoiMjAyMy0xMC0yNlQxMTozOToxNy4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTg2ODA3NDQsInJnbiI6InVzZTEifQ.YqNGkoV6ioF5pgYl_F9t32cOSUxaX_ETL_iPmpEjBOk'// Replace with your API key\n},body:JSON.stringify({'query':query})});case 6:response=_context.sent;if(response.ok){_context.next=13;break;}_context.next=10;return response.json();case 10:responseData=_context.sent;console.log(responseData);throw new Error('Failed to create item');case 13:_context.next=15;return response.json();case 15:data=_context.sent;return _context.abrupt(\"return\",data.data);case 17:case\"end\":return _context.stop();}}},_callee);}));return _createItem.apply(this,arguments);}","map":{"version":3,"names":["createItem","boardId","groupId","columnData","filteredColumnData","filter","value","itemName","find","column","id","columnValues","map","type","selectedItemId","join","query","replace","fetch","method","headers","body","JSON","stringify","response","ok","json","responseData","console","log","Error","data"],"sources":["D:/monday.com/Monday.form/quickstart-react/src/mutation.js"],"sourcesContent":["export async function createItem(boardId, groupId, columnData) {\r\n  // Filter out columns with null values\r\n  const filteredColumnData = columnData.filter(({ value }) => value !== null && value !== '');\r\n\r\n  // Construct the mutation query dynamically\r\n  const itemName = filteredColumnData.find(column => column.id === 'name').value;\r\n\r\n  const columnValues = filteredColumnData\r\n    .map(({ id, value, type }) => {\r\n      if (type === 'board-relation' && typeof value === 'object' && value !== null) {\r\n        return `\\\\\\\"${id}\\\\\\\":{\\\\\\\"linkedPulseIds\\\\\\\":[{\\\\\\\"linkedPulseId\\\\\\\"${value.selectedItemId}\\\\\\\"}]}`;\r\n      } else {\r\n        return `\\\\\\\"${id}\\\\\\\": \\\\\\\"${value}\\\\\\\"`;\r\n      }\r\n    })\r\n    .join(', ');\r\n\r\n  const query = `mutation {\r\n    create_item (\r\n      board_id: ${boardId},\r\n      group_id: \"${groupId}\",\r\n      item_name: \"${itemName.replace(/\"/g, '\\\\\"')}\",\r\n      column_values: \"{${columnValues}}\"\r\n    ) {\r\n      id\r\n    }\r\n  }`;\r\n\r\n  // Make the API request with the dynamic query\r\n  const response = await fetch(\"https://api.monday.com/v2\", {\r\n    method: 'post',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjI5MTk3MzkwMCwiYWFpIjoxMSwidWlkIjo1MDc0MDc5NiwiaWFkIjoiMjAyMy0xMC0yNlQxMTozOToxNy4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTg2ODA3NDQsInJnbiI6InVzZTEifQ.YqNGkoV6ioF5pgYl_F9t32cOSUxaX_ETL_iPmpEjBOk', // Replace with your API key\r\n    },\r\n    body: JSON.stringify({\r\n      'query': query,\r\n    }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const responseData = await response.json();\r\n    console.log(responseData);\r\n    throw new Error('Failed to create item');\r\n  }\r\n\r\n  const data = await response.json();\r\n  return data.data;\r\n}\r\n"],"mappings":"gRAAA,eAAsBA,WAAtB,uD,6FAAO,iBAA0BC,OAA1B,CAAmCC,OAAnC,CAA4CC,UAA5C,kMACL;AACMC,kBAFD,CAEsBD,UAAU,CAACE,MAAX,CAAkB,kBAAGC,MAAH,MAAGA,KAAH,OAAeA,MAAK,GAAK,IAAV,EAAkBA,KAAK,GAAK,EAA3C,EAAlB,CAFtB,CAIL;AACMC,QALD,CAKYH,kBAAkB,CAACI,IAAnB,CAAwB,SAAAC,MAAM,QAAIA,OAAM,CAACC,EAAP,GAAc,MAAlB,EAA9B,EAAwDJ,KALpE,CAOCK,YAPD,CAOgBP,kBAAkB,CACpCQ,GADkB,CACd,eAAyB,IAAtBF,GAAsB,OAAtBA,EAAsB,CAAlBJ,KAAkB,OAAlBA,KAAkB,CAAXO,IAAW,OAAXA,IAAW,CAC5B,GAAIA,IAAI,GAAK,gBAAT,EAA6B,MAAOP,MAAP,GAAiB,QAA9C,EAA0DA,KAAK,GAAK,IAAxE,CAA8E,CAC5E,oBAAcI,EAAd,gEAAuEJ,KAAK,CAACQ,cAA7E,YACD,CAFD,IAEO,CACL,oBAAcJ,EAAd,sBAA6BJ,KAA7B,SACD,CACF,CAPkB,EAQlBS,IARkB,CAQb,IARa,CAPhB,CAiBCC,KAjBD,0DAmBWf,OAnBX,iCAoBYC,OApBZ,oCAqBaK,QAAQ,CAACU,OAAT,CAAiB,IAAjB,CAAuB,KAAvB,CArBb,yCAsBkBN,YAtBlB,uCA4BL;AA5BK,sBA6BkBO,MAAK,CAAC,2BAAD,CAA8B,CACxDC,MAAM,CAAE,MADgD,CAExDC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,gBAAiB,qOAAuO;AAFjP,CAF+C,CAMxDC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnB,QAASP,KADU,CAAf,CANkD,CAA9B,CA7BvB,QA6BCQ,QA7BD,kBAwCAA,QAAQ,CAACC,EAxCT,iDAyCwBD,SAAQ,CAACE,IAAT,EAzCxB,SAyCGC,YAzCH,eA0CHC,OAAO,CAACC,GAAR,CAAYF,YAAZ,EA1CG,KA2CG,IAAIG,MAAJ,CAAU,uBAAV,CA3CH,gCA8CcN,SAAQ,CAACE,IAAT,EA9Cd,SA8CCK,IA9CD,+CA+CEA,IAAI,CAACA,IA/CP,yD"},"metadata":{},"sourceType":"module"}